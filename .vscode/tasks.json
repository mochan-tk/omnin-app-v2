{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Start FastAPI (uv)",
      "type": "shell",
      "command": "uv run uvicorn src.main:app --reload --host 0.0.0.0 --port 8000",
      "options": {
        "cwd": "${workspaceFolder}/api"
      },
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "problemMatcher": []
    },
    {
      "label": "Start Frontend (npm)",
      "type": "shell",
      "command": "npm run dev",
      "options": {
        "cwd": "${workspaceFolder}/frontend"
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "mainブランチから新規ブランチ作成",
      "type": "shell",
      "command": "git checkout main && git pull && git checkout -b ${input:branch}",
      "args": [],
      "problemMatcher": [],
    },
    {
      "label": "git fetch origin",
      "type": "shell",
      "command": "git fetch origin",
      "args": [],
      "problemMatcher": [],
    },
    {
      "label": "git commit (変更をコミットしてプッシュできる状態にします)",
      "type": "shell",
      "command": "git add . && git commit -m \"${input:message}\"",
      "args": [],
      "problemMatcher": [],
    },
    {
      "label": "git push (現在ブランチをプッシュします。未コミットがないか確認すること。)",
      "type": "shell",
      "command": "git push -u origin HEAD",
      "args": [],
      "problemMatcher": [],
      "dependsOrder": "sequence",
    },
    {
      "label": "Format FastAPI (uv)",
      "type": "shell",
      "command": "uv run ruff check ./ --fix",
      "options": {
        "cwd": "${workspaceFolder}/api"
      },
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "problemMatcher": []
    },
    {
      "label": "Format Frontend (npm)",
      "type": "shell",
      "command": "npm run lint && npm run check:fix",
      "options": {
        "cwd": "${workspaceFolder}/frontend"
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
  ],
  "inputs": [
    {
      "type": "promptString",
      "id": "message",
      "description": "コミット変更内容を入力してください。",
      "default": ""
    },
    {
      "type": "promptString",
      "id": "branch",
      "description": "ブランチ名を入力してください。",
      "default": ""
    },
  ],
  "compounds": [
    {
      "label": "Run All (FastAPI + Frontend)",
      "dependsOn": [
        "Start FastAPI (uv)",
        "Start Frontend (npm)"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    }
  ]
}